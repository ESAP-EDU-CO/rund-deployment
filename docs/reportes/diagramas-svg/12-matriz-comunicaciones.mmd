flowchart TB
    subgraph Legend["游늶 Leyenda"]
        L1["游릭 Autenticado"]
        L2["游리 Auth Pendiente"]
        L3["游댮 Sin Auth"]
    end

    subgraph Matrix["游늵 Matriz de Comunicaciones"]
        MGP["rund-mgp<br/>:4000"]
        AUTH["rund-auth<br/>:4100"]
        API["rund-api<br/>:3000"]
        CORE["rund-core<br/>:8080"]
        AI["rund-ai<br/>:8001"]
        OCR["rund-ocr<br/>:8000"]
        OLLAMA["rund-ollama<br/>:11434"]
    end

    MGP -->|"游리 JWT pendiente"| API
    MGP -->|"游릭 OAuth flow"| AUTH
    API -->|"游릭 Basic Auth*"| CORE
    API -->|"游댮 Sin auth"| AI
    API -->|"游댮 Sin auth"| OCR
    API -->|"游댮 Sin auth"| OLLAMA
    AI -->|"游댮 Sin auth"| OLLAMA
    AI -->|"游댮 Sin auth"| OCR
    AI -->|"游댮 Sin auth"| API

    classDef green fill:#c8e6c9,stroke:#2e7d32
    classDef yellow fill:#fff9c4,stroke:#f9a825
    classDef red fill:#ffcdd2,stroke:#c62828

    class AUTH green
    class MGP,CORE yellow
    class AI,OCR,OLLAMA red
